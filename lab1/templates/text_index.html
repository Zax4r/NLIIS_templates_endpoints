{% extends "base.html" %}

{% block title %}Все тексты{% endblock %}

{% block content %}
<h1>Все загруженные тексты</h1>

<div style="margin-bottom: 30px; padding: 20px; border: 1px solid #ccc;">
    <h2>Загрузить новый текст</h2>
    <form action="/text/add" method="post" enctype="multipart/form-data">
        <input type="file" name="new_text" accept=".txt,.doc,.docx" required>
        <button type="submit">Загрузить и проанализировать</button>
    </form>
</div>

{% if texts %}
    <table border="1" style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f2f2f2;">
                <th style="padding: 10px;">Название файла</th>
                <th style="padding: 10px;">Дата загрузки</th>
                <th style="padding: 10px;">Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for text in texts %}
            <tr>
                <td style="padding: 10px;">
                    <strong>{{ text.name }}</strong>
                </td>
                <td style="padding: 10px;">{{ text.date.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                <td style="padding: 10px;">
                    <div>
                        <a href="/text/{{ text.id }}" style="display: inline-block; padding: 5px 10px; background-color: #4CAF50; color: white; text-decoration: none; margin-right: 5px;">Открыть</a>
                                                
                        <form action="/text/delete/{{ text.id }}" method="post" style="display: inline;">
                            <button type="submit" onclick="return confirm('Удалить текст \"{{ text.name }}\"?')" style="padding: 5px 10px; background-color: #f44336; color: white; border: none; cursor: pointer;">Удалить</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Нет загруженных текстов. Загрузите первый текст!</p>
{% endif %}
{% endblock %}